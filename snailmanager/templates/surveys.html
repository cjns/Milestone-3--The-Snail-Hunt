{% extends "base.html" %}
{% block content %}

<h1 class="light-green-text text-darken-4 center-align">Survey</h1>
<div class="row">
  <div class="col s12 center-align">
    <a href="{{ url_for('add_survey') }}" class="btn-large light-green darken-2">
      Add Survey <i class="fa-solid fa-square-plus right"></i>
    </a>
  </div>
</div>

<ul class="collapsible">
  {% for survey in surveys|sort(attribute="survey_date") %}
  <li>
    <div class="collapsible-header white-text green darken-4">
      <i class="fa-solid fa-caret-down"></i>
      <strong>{{ survey.survey_date.strftime("%d/%b/%Y") }}, {{ survey.survey_location }}, {{ survey.survey_recorder }}</strong>
    </div>
    <div class="collapsible-body">
      <p><strong>Date:</strong> {{ survey.survey_date.strftime("%d/%b/%Y") }}</p>
      <p><strong>Time:</strong> {{ survey.survey_time.strftime("%I:%M") }}</p>
      <p><strong>Location:</strong> {{ survey.survey_location }}</p>
      <p><strong>Habitat:</strong> {{ survey.survey_habitat }}</p>
      <p><strong>Surveyor:</strong> {{ survey.survey_recorder }}</p>
      <table class="snail_table">
        <caption>Brown lipped snail (Corea nemoralis)</caption>
        <thead>
          <tr>
            <th></th>
            <th>Yellow</th>
            <th>Pink</th>
            <th>Brown</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>0 Bands</td>
            <td>{{ survey.yellow_brown_lipped_snail_0_bands }}</td>
            <td>{{ survey.pink_brown_lipped_snail_0_bands }}</td>
            <td>{{ survey.brown_brown_lipped_snail_0_bands }}</td>
          </tr>
        </tbody>
        <tr>
          <td>1 Band</td>
          <td>{{ survey.yellow_brown_lipped_snail_1_band }}</td>
          <td>{{ survey.pink_brown_lipped_snail_1_band }}</td>
          <td>{{ survey.brown_brown_lipped_snail_1_band }}</td>
        </tr>
        <tr>
          <td>Many Bands</td>
          <td>{{ survey.yellow_brown_lipped_snail_many_bands }}</td>
          <td>{{ survey.pink_brown_lipped_snail_many_bands }}</td>
          <td>{{ survey.brown_brown_lipped_snail_many_bands }}</td>
        </tr>
      </table>

      <table class="snail_table">
        <caption>White lipped snail (Corea hortensis)</caption>
        <thead>
          <tr>
            <th></th>
            <th>Yellow</th>
            <th>Pink</th>
            <th>Brown</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>0 Bands</td>
            <td>{{ survey.yellow_white_lipped_snail_0_bands }}</td>
            <td>{{ survey.pink_white_lipped_snail_0_bands }}</td>
            <td>{{ survey.brown_white_lipped_snail_0_bands }}</td>
          </tr>
        </tbody>
        <tr>
          <td>1 Band</td>
          <td>{{ survey.yellow_white_lipped_snail_1_band }}</td>
          <td>{{ survey.pink_white_lipped_snail_1_band }}</td>
          <td>{{ survey.brown_white_lipped_snail_1_band }}</td>
        </tr>
        <tr>
          <td>Many Bands</td>
          <td>{{ survey.yellow_white_lipped_snail_many_bands }}</td>
          <td>{{ survey.pink_white_lipped_snail_many_bands }}</td>
          <td>{{ survey.brown_white_lipped_snail_many_bands }}</td>
        </tr>
      </table>
      <a href="{{ url_for('edit_survey', survey_id=survey.survey_id) }}" class="btn green accent-4">Edit</a>
      <a href="{{ url_for('delete_survey', survey_id=survey.survey_id) }}" class="btn red accent-4">Delete</a>
    </div>
  </li>
  {% endfor %}
</ul>

{% endblock %}